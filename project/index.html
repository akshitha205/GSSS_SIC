<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Purchase Behavior Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- PapaParse for CSV reading -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body class="bg-light">

  <div class="container my-5">
    <h1 class="text-center mb-5">ðŸ“Š Customer Purchase Behavior Dashboard</h1>

    <!-- Tables Section -->
    <div id="tables"></div>
  </div>

  <script>
    // CSV files info
    const csvFiles = [
      {file: 'top_products.csv', title: 'Top 5 Most Purchased Products', theme: 'primary'},
      {file: 'top_customers.csv', title: 'Top Spending Customers', theme: 'success'},
      {file: 'category_revenue.csv', title: 'Revenue by Product Category', theme: 'warning'},
      {file: 'summary_stats.csv', title: 'Summary Statistics', theme: 'info'}
    ];

    const tablesDiv = document.getElementById('tables');

    // Function to render tables
    csvFiles.forEach(item => {
      Papa.parse(item.file, {
        download: true,
        header: true,
        complete: function(results) {
          // Create table card
          const card = document.createElement('div');
          card.className = `card mb-4 shadow-sm`;

          const header = document.createElement('div');
          header.className = `card-header bg-${item.theme} text-white`;
          header.innerText = item.title;

          const body = document.createElement('div');
          body.className = 'card-body';

          const table = document.createElement('table');
          table.className = 'table table-striped table-bordered';

          const thead = document.createElement('thead');
          thead.className = 'table-dark';
          const headerRow = document.createElement('tr');
          Object.keys(results.data[0]).forEach(col => {
            const th = document.createElement('th');
            th.innerText = col;
            headerRow.appendChild(th);
          });
          thead.appendChild(headerRow);
          table.appendChild(thead);

          const tbody = document.createElement('tbody');
          results.data.forEach(row => {
            const tr = document.createElement('tr');
            Object.values(row).forEach(val => {
              const td = document.createElement('td');
              td.innerText = val;
              tr.appendChild(td);
            });
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);

          body.appendChild(table);
          card.appendChild(header);
          card.appendChild(body);
          tablesDiv.appendChild(card);
        }
      });
    });
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

